https://medium.com/@kayvan.sol2/spark-on-kubernetes-d566158186c6

kubectl exec -it kayvan-release-spark-master-0 -- ./bin/spark-submit \
 --class org.apache.spark.examples.SparkPi \
 --master spark://kayvan-release-spark-master-0.kayvan-release-spark-headless.default.svc.cluster.local:7077 \
 ./examples/jars/spark-examples_2.12–3.4.1.jar 1000


https://github.com/apache/spark/blob/master/examples/src/main/scala/org/apache/spark/examples/SparkPi.scala

https://github.com/apache/spark/blob/master/examples/src/main/python/pi.py

https://github.com/apache/spark/blob/master/examples/src/main/python/wordcount.py

kubectl exec -it kayvan-release-spark-master-0 -- /bin/bash


./bin/spark-submit \
 --class org.apache.spark.examples.SparkPi \
 --master spark://kayvan-release-spark-master-0.kayvan-release-spark-headless.default.svc.cluster.local:7077 \
 ./examples/jars/spark-examples_2.12–3.4.1.jar 1000


./bin/spark-submit \
 --class org.apache.spark.examples.SparkPi \
 --master spark://kayvan-release-spark-master-0.kayvan-release-spark-headless.default.svc.cluster.local:7077 \
 ./examples/src/main/python/pi.py 1000


./bin/spark-submit \
 --class org.apache.spark.examples.SparkPi \
 --master spark://kayvan-release-spark-master-0.kayvan-release-spark-headless.default.svc.cluster.local:7077 \
 ./examples/src/main/python/wordcount.py //filepath


Here is what I tried:
# if I directly run -c "netstat -pnt |grep ssh", I get output assigned to $result:

cat check_tcp_conn.sh 

#!/bin/bash
r
result=$(kubectl exec -ti <pod_name> -- /bin/bash -c "netstat -pnt |grep ssh")

echo "result is $result"

What I want is something like this:
#script to be called:
cat netstat_tcp_conn.sh

#!/bin/bash
n
netstat -pnt |grep ssh



#script to call netstat_tcp_conn.sh:
cat check_tcp_conn.sh 

#!/bin/bash
r
result=$(kubectl exec -ti <pod_name> -- 
/
/bin/bash -c "./netstat_tcp_conn.sh)
e
echo "result is $result
https://stackoverflow.com/questions/66022042/how-to-let-kubernetes-pod-run-a-local-script

==========================================
https://etoews.github.io/blog/2017/07/29/inject-an-executable-script-into-a-container-in-kubernetes/

======================
https://stackoverflow.com/questions/41674108/how-to-include-script-and-run-it-into-kubernetes-yaml
https://stackoverflow.com/questions/41674108/how-to-include-script-and-run-it-into-kubernetes-yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: hello-world-job
spec:
  parallelism: 1
  completions: 1
  template:
    metadata:
      name: hello-world-job
    spec:
      volumes:
      - name: hello-world-scripts-volume
        configMap:
          name: hello-world-scripts
      containers:
      - name: hello-world-job
        image: alpine
        volumeMounts:
          - mountPath: /hello-world-scripts
            name: hello-world-scripts-volume
        env:
          - name: HOME
            value: /tmp
        command:
        - /bin/sh
        - -c
        - |
 
          echo "scripts in /hello-world-scripts"
 
          ls -lh /hello-world-scripts
 
          echo "copy scripts to /tmp"
 
          cp /hello-world-scripts/*.sh /tmp
 
          echo "apply 'chmod +x' to /tmp/*.sh"
 
          chmod +x /tmp/*.sh
 
          echo "execute script-one.sh now"
 
          /tmp/script-one.sh

      restartPolicy: Never
---
apiVersion: v1
items:
- apiVersion: v1
  data:
    script-one.sh: |
 
      echo "script-one.sh"
 
      date
 
      sleep 1
 
      echo "run /tmp/script-2.sh now"
 
      /tmp/script-2.sh

    script-2.sh: |
 
      echo "script-2.sh"
 
      sleep 1
 
      date

  kind: ConfigMap
  metadata:
    creationTimestamp: null
    name:  hello-world-scripts
kind: List
metadata: {}

================================================================
